<html lang="de"><head><style>.gm-err-container{height:100%;width:100%;display:table;background-color:#e8eaed;position:relative;left:0;top:0}.gm-err-content{border-radius:1px;padding-top:0;padding-left:10%;padding-right:10%;position:static;vertical-align:middle;display:table-cell}.gm-err-content a{color:#3c4043}.gm-err-icon{text-align:center}.gm-err-title{margin:5px;margin-bottom:20px;color:#3c4043;font-family:Roboto,Arial,sans-serif;text-align:center;font-size:24px}.gm-err-message{margin:5px;color:#3c4043;font-family:Roboto,Arial,sans-serif;text-align:center;font-size:12px}.gm-err-autocomplete{padding-left:20px;background-repeat:no-repeat;-webkit-background-size:15px 15px;background-size:15px 15px}sentinel{}
</style><style>.gm-style-moc{background-color:rgba(0,0,0,.59);pointer-events:none;text-align:center;-webkit-transition:opacity ease-in-out;transition:opacity ease-in-out}.gm-style-mot{color:white;font-family:Roboto,Arial,sans-serif;font-size:22px;margin:0;position:relative;top:50%;transform:translateY(-50%);-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%)}sentinel{}
</style><style>.gm-style img{max-width: none;}.gm-style {font: 400 11px Roboto, Arial, sans-serif; text-decoration: none;}</style><link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans:400,500,700|Google+Sans+Text:400,500,700&amp;lang=de"><link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Google+Sans+Text:400&amp;text=%E2%86%90%E2%86%92%E2%86%91%E2%86%93&amp;lang=de">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Landsknechte Marschplan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .btn-primary {
            background-color: #4338ca;
            transition: all 0.2s ease;
        }
        .btn-primary:hover {
            background-color: #3730a3;
        }
        .btn-secondary {
            background-color: #6b7280;
            transition: all 0.2s ease;
        }
        .btn-secondary:hover {
            background-color: #4b5563;
        }
        .btn-maps {
            background-color: #34a853;
            transition: all 0.2s ease;
        }
        .btn-maps:hover {
            background-color: #2d9249;
        }
        .btn-maps-full {
            background-color: #4285F4;
            transition: all 0.2s ease;
        }
        .btn-maps-full:hover {
            background-color: #3367D6;
        }
        .card {
            transition: all 0.2s ease;
        }
        .card:hover {
            transform: translateY(-2px);
        }
        .address-card {
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .address-card:hover {
            background-color: #f5f7ff;
        }
        .address-card.active {
            border-left: 3px solid #4338ca;
        }
        .special-note {
            background-color: #fffbeb;
            border-left: 3px solid #f59e0b;
        }
        .pause-status {
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 500;
            font-size: 0.75rem;
        }
        .pause-ok {
            background-color: #d1fae5;
            color: #065f46;
        }
        .pause-warning {
            background-color: #fef3c7;
            color: #92400e;
        }
        .pause-danger {
            background-color: #fee2e2;
            color: #b91c1c;
        }
        #map-container {
            width: 100%;
            height: 400px;
            border-radius: 0.5rem;
            overflow: hidden;
        }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.16 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:0.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.ml-1{margin-left:0.25rem}.ml-2{margin-left:0.5rem}.mr-2{margin-right:0.5rem}.mr-4{margin-right:1rem}.mt-2{margin-top:0.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.mr-3{margin-right:0.75rem}.mt-1{margin-top:0.25rem}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-5{height:1.25rem}.w-5{width:1.25rem}.w-full{width:100%}.max-w-2xl{max-width:42rem}.max-w-4xl{max-width:56rem}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-4{gap:1rem}.rounded-lg{border-radius:0.5rem}.border{border-width:1px}.border-l-4{border-left-width:4px}.border-gray-300{--tw-border-opacity:1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-gray-400{--tw-border-opacity:1;border-color:rgb(156 163 175 / var(--tw-border-opacity, 1))}.border-indigo-600{--tw-border-opacity:1;border-color:rgb(79 70 229 / var(--tw-border-opacity, 1))}.bg-indigo-700{--tw-bg-opacity:1;background-color:rgb(67 56 202 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.p-4{padding:1rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.text-center{text-align:center}.text-right{text-align:right}.text-2xl{font-size:1.5rem;line-height:2rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-indigo-100{--tw-text-opacity:1;color:rgb(224 231 255 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-indigo-600{--tw-text-opacity:1;color:rgb(79 70 229 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity:1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.opacity-50{opacity:0.5}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.hover\:bg-indigo-50:hover{--tw-bg-opacity:1;background-color:rgb(238 242 255 / var(--tw-bg-opacity, 1))}.hover\:text-gray-800:hover{--tw-text-opacity:1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}@media (min-width: 768px){.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.md\:grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}}</style><script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&amp;callback=initMapsCallback" async="" defer=""></script><script type="text/javascript" charset="UTF-8" src="https://maps.googleapis.com/maps-api-v3/api/js/61/5a/intl/de_ALL/common.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps.googleapis.com/maps-api-v3/api/js/61/5a/intl/de_ALL/util.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps.googleapis.com/maps-api-v3/api/js/61/5a/intl/de_ALL/map.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps.googleapis.com/maps-api-v3/api/js/61/5a/intl/de_ALL/geometry.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps.googleapis.com/maps-api-v3/api/js/61/5a/intl/de_ALL/directions.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps.googleapis.com/maps-api-v3/api/js/61/5a/intl/de_ALL/infowindow.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps.googleapis.com/maps-api-v3/api/js/61/5a/intl/de_ALL/marker.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps.googleapis.com/maps-api-v3/api/js/61/5a/intl/de_ALL/log.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps.googleapis.com/maps-api-v3/api/js/61/5a/intl/de_ALL/onion.js"></script></head>
<body>
    <div class="container mx-auto px-4 py-6 max-w-4xl">
        <!-- Header -->
        <header class="bg-indigo-700 text-white rounded-lg shadow-lg p-4 mb-6">
            <h1 class="text-2xl font-bold text-center">Landsknechte Marschplan</h1>
            <p class="text-center text-indigo-100">Rutenfest 2025</p>
        </header>

        <!-- Main Content -->
        <main>
            <!-- Day Selection View -->
            <div id="day-selection" class="fade-in">
                <h2 class="text-xl font-bold text-center mb-4 text-gray-800">Wähle einen Tag</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mx-auto">
                    <button class="day-btn card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50" data-day="FREITAG">
                        <div class="text-4xl mb-2">📅</div>
                        <h3 class="text-lg font-semibold text-gray-800">Freitag</h3>
                    </button>
                    <button class="day-btn card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50" data-day="SAMSTAG">
                        <div class="text-4xl mb-2">📅</div>
                        <h3 class="text-lg font-semibold text-gray-800">Samstag</h3>
                    </button>
                    <button class="day-btn card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50" data-day="SONNTAG">
                        <div class="text-4xl mb-2">📅</div>
                        <h3 class="text-lg font-semibold text-gray-800">Sonntag</h3>
                    </button>
                    <button class="day-btn card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50" data-day="MONTAG">
                        <div class="text-4xl mb-2">📅</div>
                        <h3 class="text-lg font-semibold text-gray-800">Montag</h3>
                    </button>
                    <button class="day-btn card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50" data-day="DIENSTAG">
                        <div class="text-4xl mb-2">📅</div>
                        <h3 class="text-lg font-semibold text-gray-800">Dienstag</h3>
                    </button>
                    <button class="day-btn card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50" data-day="AUSWÄRTIGER_SAMSTAG">
                        <div class="text-4xl mb-2">🌍</div>
                        <h3 class="text-lg font-semibold text-gray-800">Auswärtiger Samstag</h3>
                    </button>
                    <button class="day-btn card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50" data-day="AUSWÄRTIGER_SONNTAG">
                        <div class="text-4xl mb-2">🌍</div>
                        <h3 class="text-lg font-semibold text-gray-800">Auswärtiger Sonntag</h3>
                    </button>
                </div>
            </div>

            <!-- Address Selection View -->
            <div id="address-selection" class="fade-in hidden">
                <div class="flex justify-between items-center mb-4">
                    <button id="back-to-days" class="btn-secondary text-white px-4 py-2 rounded-lg flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Zurück
                    </button>
                    <h2 id="selected-day-title" class="text-xl font-bold text-gray-800">
                        <span>SAMSTAG</span>
                    </h2>
                    
                    <!-- Full Route Button -->
                    <button id="full-route-btn" class="btn-maps-full text-white px-4 py-2 rounded-lg flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M12 1.586l-4 4v12.828l4-4V1.586zM3.707 3.293A1 1 0 002 4v10a1 1 0 00.293.707L6 18.414V5.586L3.707 3.293zM17.707 5.293L14 1.586v12.828l2.293 2.293A1 1 0 0018 16V6a1 1 0 00-.293-.707z" clip-rule="evenodd"></path>
                        </svg>
                        Gesamte Route
                    </button>
                </div>
                
                <div class="mb-4">
                    <input type="text" id="address-search" placeholder="Adresse oder Name suchen..." class="w-full px-4 py-2 rounded-lg border border-gray-300">
                </div>
                
                <div id="addresses-list" class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Rosenweg 58</h3>
                            <p class="text-gray-700">Hans Fischer</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2012</span>
                                <span class="text-indigo-600">Pause: 5m</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">09:15</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Marktplatz 76</h3>
                            <p class="text-gray-700">Josef Meyer</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2012, 2013</span>
                                <span class="text-indigo-600">Pause: 20m</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">09:34</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Tulpenstraße 13</h3>
                            <p class="text-gray-700">Sabine Bauer</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2010</span>
                                
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">09:47</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Bachstraße 17</h3>
                            <p class="text-gray-700">Peter Schröder</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2014, 2015</span>
                                <span class="text-indigo-600">Pause: 15m</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">10:06</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Rosenweg 70</h3>
                            <p class="text-gray-700">Josef Weber</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2012, 2013</span>
                                
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">10:26</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Bachstraße 79</h3>
                            <p class="text-gray-700">Monika Richter</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2012</span>
                                
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">10:38</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Goetheweg 87</h3>
                            <p class="text-gray-700">Hans Fischer</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: Alle</span>
                                
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">10:53</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Bachstraße 83</h3>
                            <p class="text-gray-700">Andrea Weber</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2015</span>
                                <span class="text-indigo-600">Pause: 1m</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">11:07</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Ulmenweg 68</h3>
                            <p class="text-gray-700">Petra Schneider</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2014, 2015</span>
                                <span class="text-indigo-600">Pause: 4m</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">11:17</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Goetheweg 63</h3>
                            <p class="text-gray-700">Elisabeth Wolf</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2015</span>
                                <span class="text-indigo-600">Pause: 30m</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">11:36</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Bergstraße 5</h3>
                            <p class="text-gray-700">Claudia Klein</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2014</span>
                                
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">11:55</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Eichenstraße 89</h3>
                            <p class="text-gray-700">Hans Müller</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2015</span>
                                <span class="text-indigo-600">Pause: 15m</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">12:05</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Schillerstraße 78</h3>
                            <p class="text-gray-700">Stefan Wagner</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2011</span>
                                <span class="text-indigo-600">Pause: 4m</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">12:19</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Goetheweg 53</h3>
                            <p class="text-gray-700">Claudia Zimmermann</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2014</span>
                                
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">12:32</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Schillerstraße 85</h3>
                            <p class="text-gray-700">Peter Richter</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2015</span>
                                
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">12:49</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50" style="border-left: 4px solid rgb(26, 83, 92);">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Goetheweg 72</h3>
                            <p class="text-gray-700">Maria Bauer</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2014, 2015</span>
                                <span class="text-indigo-600">Pause: 26m</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">13:04</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Beethovenallee 14</h3>
                            <p class="text-gray-700">Hans Hoffmann</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2010, 2011</span>
                                <span class="text-indigo-600">Pause: 2m</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">13:14</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Tannenweg 40</h3>
                            <p class="text-gray-700">Christian Becker</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2011</span>
                                
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">13:29</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Ahornstraße 67</h3>
                            
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2014</span>
                                <span class="text-indigo-600">Pause: 19m</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">13:48</span>
                        </div>
                    </div>
                </div><div class="address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">Eichenstraße 13</h3>
                            <p class="text-gray-700">Elisabeth Schröder</p>
                            <div class="flex mt-1">
                                <span class="text-gray-600 mr-3">Jahrgang: 2014, 2015</span>
                                <span class="text-indigo-600">Pause: 3m</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">14:08</span>
                        </div>
                    </div>
                </div></div>
            </div>

            <!-- Navigation View -->
            <div id="navigation-view" class="fade-in hidden">
                <div class="flex justify-between items-center mb-4">
                    <button id="back-to-addresses" class="btn-secondary text-white px-4 py-2 rounded-lg flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Zurück
                    </button>
                    <div class="flex items-center">
                        <span id="current-position" class="font-semibold text-gray-700 mr-2">1</span>
                        <span class="text-gray-500">/</span>
                        <span id="total-addresses" class="text-gray-500 ml-2">20</span>
                    </div>
                    
                    <!-- Full Route Button in Navigation View -->
                    <button id="full-route-btn-nav" class="btn-maps-full text-white px-4 py-2 rounded-lg flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M12 1.586l-4 4v12.828l4-4V1.586zM3.707 3.293A1 1 0 002 4v10a1 1 0 00.293.707L6 18.414V5.586L3.707 3.293zM17.707 5.293L14 1.586v12.828l2.293 2.293A1 1 0 0018 16V6a1 1 0 00-.293-.707z" clip-rule="evenodd"></path>
                        </svg>
                        Gesamte Route
                    </button>
                </div>

                <!-- Delay Display -->
                <div class="bg-white rounded-lg shadow-md p-4 mb-4">
                    <div class="flex justify-between items-center mb-2">
                        <div class="flex items-center">
                            <h3 class="text-lg font-semibold text-gray-800 mr-2">Verspätung:</h3>
                            <div id="delay-display" class="text-xl font-bold">
                                <span id="delay-value" class="text-red-600">06:02:45</span>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="text-gray-600 mr-4">
                                Geplant: <span id="planned-time" class="font-medium">09:15</span>
                            </div>
                            <div class="text-gray-600">
                                Aktuell: <span id="current-time" class="font-medium">15:17</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pause Status -->
                    <div id="pause-status-container" class="mt-2">
                        <div class="pause-status pause-danger">
                            <div class="flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                                </svg>
                                <span>Verspätung: 357 Minuten über die geplante Pause hinaus!</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Current Address -->
                <div class="mb-4">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-lg font-semibold text-gray-800">Aktuelle Adresse</h3>
                    </div>
                    <div id="current-address" class="bg-white rounded-lg shadow-md p-4 border-l-4 border-indigo-600">
                <div class="flex justify-between items-start">
                    <div>
                        <h3 class="font-bold text-gray-800">Rosenweg 58</h3>
                        <p class="text-gray-700">Hans Fischer</p>
                        <div class="flex flex-wrap mt-1">
                            <span class="text-gray-600 mr-3">Jahrgang: 2012</span>
                            <span class="text-indigo-600">Pause: 5m</span>
                        </div>
                    </div>
                    <div class="text-right">
                        <span class="text-lg font-semibold text-indigo-600">09:15</span>
                    </div>
                </div>
            </div>
                </div>

                <!-- Route Map Section (initially hidden) -->
                <div id="route-section" class="mb-4 hidden">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-lg font-semibold text-gray-800">Route zur nächsten Adresse</h3>
                        <button id="hide-route-btn" class="text-gray-600 hover:text-gray-800">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-4">
                        <div id="map-container" class="mb-4" style="position: relative; overflow: hidden;"><div style="height: 100%; width: 100%; position: absolute; top: 0px; left: 0px; background-color: rgb(229, 227, 223);"><div class="gm-err-container"><div class="gm-err-content"><div class="gm-err-icon"><img src="https://maps.gstatic.com/mapfiles/api-3/images/icon_error.png" alt="" draggable="false" style="user-select: none;"></div><div class="gm-err-title">Hoppla! Ein Fehler ist aufgetreten.</div><div class="gm-err-message">Google Maps wurde auf dieser Seite nicht richtig geladen. Technische Details dazu entnimmst du der JavaScript-Konsole.</div></div></div></div></div>
                        <div class="flex justify-between mt-2">
                            <div>
                                <span class="font-semibold text-gray-800">Entfernung:</span>
                                <span id="route-distance" class="text-gray-600 ml-1">Wird berechnet...</span>
                            </div>
                            <div>
                                <span class="font-semibold text-gray-800">Dauer:</span>
                                <span id="route-duration" class="text-gray-600 ml-1">Wird berechnet...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Google Maps Navigation Button -->
                <div id="maps-navigation-container" class="mb-4">
                <button id="show-route-btn" class="btn-maps text-white px-4 py-3 rounded-lg flex items-center justify-center w-full">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
                    </svg>
                    Route zur nächsten Adresse
                </button>
            </div>

                <!-- Next Address -->
                <div class="mb-4">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-lg font-semibold text-gray-800">Nächste Adresse</h3>
                    </div>
                    <div id="next-address" class="bg-white rounded-lg shadow-md p-4 border-l-4 border-gray-400">
                <div class="flex justify-between items-start">
                    <div>
                        <h3 class="font-bold text-gray-800">Marktplatz 76</h3>
                        <p class="text-gray-700">Josef Meyer</p>
                        <div class="flex flex-wrap mt-1">
                            <span class="text-gray-600 mr-3">Jahrgang: 2012, 2013</span>
                            <span class="text-indigo-600">Pause: 20m</span>
                        </div>
                    </div>
                    <div class="text-right">
                        <span class="text-lg font-semibold text-gray-600">09:34</span>
                    </div>
                </div>
            </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="flex justify-between mt-6">
                    <button id="prev-btn" class="btn-secondary text-white px-6 py-3 rounded-lg flex items-center opacity-50" disabled="">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M15.707 15.707a1 1 0 01-1.414 0l-5-5a1 1 0 010-1.414l5-5a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Vorherige Adresse
                    </button>
                    <button id="next-btn" class="btn-primary text-white px-6 py-3 rounded-lg flex items-center">
                        Nächste Adresse
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10.293 15.707a1 1 0 010-1.414L14.586 10l-4.293-4.293a1 1 0 111.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Full Route View -->
            <div id="full-route-view" class="hidden fade-in">
                <div class="flex justify-between items-center mb-4">
                    <button id="back-from-full-route" class="btn-secondary text-white px-4 py-2 rounded-lg flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Zurück
                    </button>
                    <h2 class="text-xl font-bold text-gray-800">Gesamte Route</h2>
                </div>

                <div class="bg-white rounded-lg shadow-md p-4">
                    <div id="full-map-container" style="width: 100%; height: 400px; border-radius: 0.5rem;"></div>
                    <div class="flex justify-between mt-4">
                        <div>
                            <span class="font-semibold text-gray-800">Gesamtentfernung:</span>
                            <span id="full-route-distance" class="text-gray-600 ml-1">Wird berechnet...</span>
                        </div>
                        <div>
                            <span class="font-semibold text-gray-800">Gesamtdauer:</span>
                            <span id="full-route-duration" class="text-gray-600 ml-1">Wird berechnet...</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="mt-8 text-center text-gray-500">
            <p>© 2025 Landsknechte Marschplan</p>
        </footer>
    </div>

    <script>
        // Generate sample data with addresses per day
        const marschplanData = generateSampleData();

        // DOM elements
        const daySelection = document.getElementById('day-selection');
        const addressSelection = document.getElementById('address-selection');
        const navigationView = document.getElementById('navigation-view');
        const fullRouteView = document.getElementById('full-route-view');
        const routeSection = document.getElementById('route-section');
        const selectedDayTitle = document.getElementById('selected-day-title').querySelector('span');
        const addressesList = document.getElementById('addresses-list');
        const addressSearch = document.getElementById('address-search');
        const currentAddressEl = document.getElementById('current-address');
        const nextAddressEl = document.getElementById('next-address');
        const currentPositionEl = document.getElementById('current-position');
        const totalAddressesEl = document.getElementById('total-addresses');
        const delayValueEl = document.getElementById('delay-value');
        const plannedTimeEl = document.getElementById('planned-time');
        const currentTimeEl = document.getElementById('current-time');
        const pauseStatusContainer = document.getElementById('pause-status-container');
        const mapsNavigationContainer = document.getElementById('maps-navigation-container');
        const routeDistanceEl = document.getElementById('route-distance');
        const routeDurationEl = document.getElementById('route-duration');
        const fullRouteDistanceEl = document.getElementById('full-route-distance');
        const fullRouteDurationEl = document.getElementById('full-route-duration');

        // Buttons
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const backToDaysBtn = document.getElementById('back-to-days');
        const backToAddressesBtn = document.getElementById('back-to-addresses');
        const hideRouteBtn = document.getElementById('hide-route-btn');
        const backFromFullRouteBtn = document.getElementById('back-from-full-route');
        const fullRouteBtn = document.getElementById('full-route-btn');
        const fullRouteBtnNav = document.getElementById('full-route-btn-nav');

        // State variables
        let selectedDay = '';
        let addresses = [];
        let currentIndex = 0;
        let delayUpdateInterval;
        let map = null;
        let fullMap = null;
        let directionsService = null;
        let directionsRenderer = null;
        let fullDirectionsRenderer = null;
        let currentView = 'day-selection'; // To track which view to return to

        // Event listeners
        document.querySelectorAll('.day-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                selectedDay = btn.dataset.day;
                showAddressSelection();
            });
        });

        backToDaysBtn.addEventListener('click', () => {
            addressSelection.classList.add('hidden');
            daySelection.classList.remove('hidden');
            currentView = 'day-selection';
        });

        backToAddressesBtn.addEventListener('click', () => {
            navigationView.classList.add('hidden');
            addressSelection.classList.remove('hidden');
            currentView = 'address-selection';
            clearInterval(delayUpdateInterval);
            hideRouteSection();
        });

        hideRouteBtn.addEventListener('click', () => {
            hideRouteSection();
        });

        backFromFullRouteBtn.addEventListener('click', () => {
            fullRouteView.classList.add('hidden');
            
            if (currentView === 'navigation-view') {
                navigationView.classList.remove('hidden');
            } else {
                addressSelection.classList.remove('hidden');
            }
        });

        prevBtn.addEventListener('click', () => {
            if (currentIndex > 0) {
                currentIndex--;
                updateNavigationView();
                hideRouteSection();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentIndex < addresses.length - 1) {
                currentIndex++;
                updateNavigationView();
                hideRouteSection();
            }
        });

        addressSearch.addEventListener('input', () => {
            const searchTerm = addressSearch.value.toLowerCase();
            renderAddressList(searchTerm);
        });

        fullRouteBtn.addEventListener('click', () => {
            showFullRouteView();
            currentView = 'address-selection';
        });

        fullRouteBtnNav.addEventListener('click', () => {
            showFullRouteView();
            currentView = 'navigation-view';
        });

        // Functions
        function showAddressSelection() {
            daySelection.classList.add('hidden');
            addressSelection.classList.remove('hidden');
            currentView = 'address-selection';
            selectedDayTitle.textContent = formatDayName(selectedDay);
            addresses = marschplanData[selectedDay] || [];
            renderAddressList();
        }

        function renderAddressList(searchTerm = '') {
            addressesList.innerHTML = '';
            
            addresses.forEach((address, index) => {
                const addressText = `${address.strasse} ${address.hausnummer}`.toLowerCase();
                const nameText = address.name ? address.name.toLowerCase() : '';
                if (searchTerm && !addressText.includes(searchTerm) && !nameText.includes(searchTerm)) {
                    return;
                }

                const card = document.createElement('div');
                card.className = 'address-card bg-white rounded-lg shadow-md p-4 hover:bg-indigo-50';
                
                // If address has a color, apply it as a left border
                if (address.farbe && address.farbe !== 'transparent') {
                    card.style.borderLeft = `4px solid ${address.farbe}`;
                }

                card.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-gray-800">${address.strasse} ${address.hausnummer}</h3>
                            ${address.name ? `<p class="text-gray-700">${address.name}</p>` : ''}
                            <div class="flex mt-1">
                                ${address.jahrgang ? `<span class="text-gray-600 mr-3">Jahrgang: ${address.jahrgang}</span>` : ''}
                                ${address.pause ? `<span class="text-indigo-600">Pause: ${address.pause}m</span>` : ''}
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-indigo-600 font-medium">${address.uhrzeit}</span>
                        </div>
                    </div>
                `;

                card.addEventListener('click', () => {
                    currentIndex = index;
                    showNavigationView();
                });

                addressesList.appendChild(card);
            });
        }

        function showNavigationView() {
            addressSelection.classList.add('hidden');
            navigationView.classList.remove('hidden');
            currentView = 'navigation-view';
            updateNavigationView();
            startDelayUpdates();
            hideRouteSection();
        }

        function updateNavigationView() {
            const currentAddress = addresses[currentIndex];
            const nextAddress = currentIndex < addresses.length - 1 ? addresses[currentIndex + 1] : null;
            
            // Update position indicator
            currentPositionEl.textContent = currentIndex + 1;
            totalAddressesEl.textContent = addresses.length;
            
            // Update current address
            currentAddressEl.innerHTML = renderAddressDetails(currentAddress, true);
            
            // Update next address
            if (nextAddress) {
                nextAddressEl.innerHTML = renderAddressDetails(nextAddress);
                nextAddressEl.classList.remove('hidden');
                
                // Add Google Maps navigation button
                updateMapsNavigationButton(currentAddress, nextAddress);
            } else {
                nextAddressEl.innerHTML = `
                    <div class="text-center py-4">
                        <p class="text-gray-500">Keine weiteren Adressen</p>
                    </div>
                `;
                // Hide maps button when there's no next address
                mapsNavigationContainer.innerHTML = '';
            }
            
            // Update button states
            prevBtn.disabled = currentIndex === 0;
            prevBtn.classList.toggle('opacity-50', currentIndex === 0);
            nextBtn.disabled = currentIndex === addresses.length - 1;
            nextBtn.classList.toggle('opacity-50', currentIndex === addresses.length - 1);
            
            // Update delay
            updateDelay();
        }

        function updateMapsNavigationButton(currentAddress, nextAddress) {
            if (!nextAddress) {
                mapsNavigationContainer.innerHTML = '';
                return;
            }
            
            mapsNavigationContainer.innerHTML = `
                <button id="show-route-btn" class="btn-maps text-white px-4 py-3 rounded-lg flex items-center justify-center w-full">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
                    </svg>
                    Route zur nächsten Adresse
                </button>
            `;
            
            document.getElementById('show-route-btn').addEventListener('click', () => {
                showRouteSection(currentAddress, nextAddress);
            });
        }

        function showRouteSection(originAddress, destinationAddress) {
            // Show the route section
            routeSection.classList.remove('hidden');
            
            // Scroll to the route section
            routeSection.scrollIntoView({ behavior: 'smooth' });
            
            // Initialize map if not already done
            if (!map) {
                initMap();
            }
            
            // Calculate and display route
            calculateRoute(originAddress, destinationAddress);
        }

        function hideRouteSection() {
            routeSection.classList.add('hidden');
        }

        function initMap() {
            // Create map
            map = new google.maps.Map(document.getElementById('map-container'), {
                center: { lat: 47.7814, lng: 9.6136 }, // Ravensburg coordinates
                zoom: 14,
                mapTypeControl: false,
                fullscreenControl: true,
                streetViewControl: false
            });
            
            // Create directions service and renderer
            directionsService = new google.maps.DirectionsService();
            directionsRenderer = new google.maps.DirectionsRenderer({
                map: map,
                suppressMarkers: false,
                polylineOptions: {
                    strokeColor: '#4338ca',
                    strokeWeight: 5
                }
            });
        }

        function initFullMap() {
            // Create full route map
            fullMap = new google.maps.Map(document.getElementById('full-map-container'), {
                center: { lat: 47.7814, lng: 9.6136 }, // Ravensburg coordinates
                zoom: 13,
                mapTypeControl: false,
                fullscreenControl: true,
                streetViewControl: false
            });
            
            // Create directions renderer for full route
            fullDirectionsRenderer = new google.maps.DirectionsRenderer({
                map: fullMap,
                suppressMarkers: false,
                polylineOptions: {
                    strokeColor: '#4285F4',
                    strokeWeight: 5
                }
            });
        }

        function calculateRoute(originAddress, destinationAddress) {
            // Create the full addresses for origin and destination
            const origin = `${originAddress.strasse} ${originAddress.hausnummer}, Ravensburg, Germany`;
            const destination = `${destinationAddress.strasse} ${destinationAddress.hausnummer}, Ravensburg, Germany`;
            
            // Set route information
            routeDistanceEl.textContent = 'Wird berechnet...';
            routeDurationEl.textContent = 'Wird berechnet...';
            
            // Calculate route
            directionsService.route({
                origin: origin,
                destination: destination,
                travelMode: google.maps.TravelMode.WALKING
            }, (response, status) => {
                if (status === 'OK') {
                    directionsRenderer.setDirections(response);
                    
                    // Update route info
                    const route = response.routes[0];
                    const leg = route.legs[0];
                    routeDistanceEl.textContent = leg.distance.text;
                    routeDurationEl.textContent = leg.duration.text;
                } else {
                    alert('Routenberechnung fehlgeschlagen: ' + status);
                    routeDistanceEl.textContent = 'Fehler';
                    routeDurationEl.textContent = 'Fehler';
                }
            });
        }

        function showFullRouteView() {
            // Hide current views
            navigationView.classList.add('hidden');
            addressSelection.classList.add('hidden');
            
            // Show full route view
            fullRouteView.classList.remove('hidden');
            
            // Initialize full map if not already done
            if (!fullMap) {
                initFullMap();
            }
            
            // Calculate and display full route
            calculateFullRoute();
        }

        function calculateFullRoute() {
            if (addresses.length < 2) {
                alert('Es gibt nicht genügend Adressen für eine Route.');
                return;
            }
            
            // Get first and last address
            const firstAddress = addresses[0];
            const lastAddress = addresses[addresses.length - 1];
            
            // Set route information
            fullRouteDistanceEl.textContent = 'Wird berechnet...';
            fullRouteDurationEl.textContent = 'Wird berechnet...';
            
            // Create waypoints for intermediate addresses (max 8 due to Google Maps API limitations)
            const waypointAddresses = [];
            const step = Math.ceil(addresses.length / 8);
            
            for (let i = step; i < addresses.length - 1; i += step) {
                if (waypointAddresses.length < 8) {
                    const address = addresses[i];
                    waypointAddresses.push({
                        location: `${address.strasse} ${address.hausnummer}, Ravensburg, Germany`,
                        stopover: true
                    });
                }
            }
            
            // Create origin and destination
            const origin = `${firstAddress.strasse} ${firstAddress.hausnummer}, Ravensburg, Germany`;
            const destination = `${lastAddress.strasse} ${lastAddress.hausnummer}, Ravensburg, Germany`;
            
            // Calculate route
            const directionsService = new google.maps.DirectionsService();
            directionsService.route({
                origin: origin,
                destination: destination,
                waypoints: waypointAddresses,
                optimizeWaypoints: false,
                travelMode: google.maps.TravelMode.WALKING
            }, (response, status) => {
                if (status === 'OK') {
                    fullDirectionsRenderer.setDirections(response);
                    
                    // Calculate total distance and duration
                    let totalDistance = 0;
                    let totalDuration = 0;
                    
                    const route = response.routes[0];
                    route.legs.forEach(leg => {
                        totalDistance += leg.distance.value;
                        totalDuration += leg.duration.value;
                    });
                    
                    // Convert to human-readable format
                    const distanceKm = (totalDistance / 1000).toFixed(1);
                    const durationMin = Math.round(totalDuration / 60);
                    
                    // Update route info
                    fullRouteDistanceEl.textContent = `${distanceKm} km`;
                    fullRouteDurationEl.textContent = `${durationMin} Minuten`;
                } else {
                    alert('Routenberechnung fehlgeschlagen: ' + status);
                    fullRouteDistanceEl.textContent = 'Fehler';
                    fullRouteDurationEl.textContent = 'Fehler';
                }
            });
        }

        function renderAddressDetails(address, isCurrent = false) {
            const borderColor = address.farbe && address.farbe !== 'transparent' 
                ? address.farbe 
                : (isCurrent ? '#4338ca' : '#9ca3af');
            
            let html = `
                <div class="flex justify-between items-start">
                    <div>
                        <h3 class="font-bold text-gray-800">${address.strasse} ${address.hausnummer}</h3>
                        ${address.name ? `<p class="text-gray-700">${address.name}</p>` : ''}
                        <div class="flex flex-wrap mt-1">
                            ${address.jahrgang ? `<span class="text-gray-600 mr-3">Jahrgang: ${address.jahrgang}</span>` : ''}
                            ${address.pause ? `<span class="text-indigo-600">Pause: ${address.pause}m</span>` : ''}
                        </div>
                    </div>
                    <div class="text-right">
                        <span class="text-lg font-semibold ${isCurrent ? 'text-indigo-600' : 'text-gray-600'}">${address.uhrzeit}</span>
                    </div>
                </div>
            `;
            
            // Add special note if exists
            if (address.spezialEvent) {
                html += `
                    <div class="mt-3 special-note p-3 rounded">
                        <div class="flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-amber-500 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                            </svg>
                            <span class="font-medium text-amber-800">${address.spezialEvent}</span>
                        </div>
                    </div>
                `;
            }
            
            return html;
        }

        function startDelayUpdates() {
            updateDelay();
            clearInterval(delayUpdateInterval);
            delayUpdateInterval = setInterval(updateDelay, 1000); // Update every second
        }

        function updateDelay() {
            const currentAddress = addresses[currentIndex];
            const now = new Date();
            const currentTimeStr = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
            
            // Update current time display
            currentTimeEl.textContent = currentTimeStr;
            plannedTimeEl.textContent = currentAddress.uhrzeit;
            
            // Calculate delay
            const [plannedHours, plannedMinutes] = currentAddress.uhrzeit.split(':').map(Number);
            const plannedTime = new Date();
            plannedTime.setHours(plannedHours, plannedMinutes, 0);
            
            const delayMs = now - plannedTime;
            const delayMinutes = Math.floor(delayMs / (1000 * 60));
            
            // Format delay in hours, minutes, seconds
            const delayFormatted = formatDelay(delayMs);
            
            // Update delay display
            delayValueEl.textContent = delayFormatted;
            delayValueEl.className = delayMs > 0 ? 'text-red-600' : 'text-green-600';
            
            // Update pause status
            updatePauseStatus(delayMinutes, currentAddress.pause || 0);
        }

        function updatePauseStatus(delayMinutes, pauseMinutes) {
            pauseStatusContainer.innerHTML = '';
            
            if (pauseMinutes === 0) {
                // No pause planned
                if (delayMinutes > 0) {
                    pauseStatusContainer.innerHTML = `
                        <div class="pause-status pause-danger">
                            <div class="flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                                </svg>
                                <span>Verspätung: ${delayMinutes} Minuten (keine Pause geplant)</span>
                            </div>
                        </div>
                    `;
                } else {
                    pauseStatusContainer.innerHTML = `
                        <div class="pause-status pause-ok">
                            <div class="flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                                </svg>
                                <span>Pünktlich (keine Pause geplant)</span>
                            </div>
                        </div>
                    `;
                }
            } else {
                // Pause planned
                if (delayMinutes <= 0) {
                    // No delay, full pause available
                    pauseStatusContainer.innerHTML = `
                        <div class="pause-status pause-ok">
                            <div class="flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                                </svg>
                                <span>Volle Pause verfügbar: ${pauseMinutes} Minuten</span>
                            </div>
                        </div>
                    `;
                } else if (delayMinutes < pauseMinutes) {
                    // Delay less than pause
                    const remainingPause = pauseMinutes - delayMinutes;
                    pauseStatusContainer.innerHTML = `
                        <div class="pause-status pause-warning">
                            <div class="flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                                </svg>
                                <span>Verspätung: ${delayMinutes} Minuten, Restpause: ${remainingPause} Minuten</span>
                            </div>
                        </div>
                    `;
                } else {
                    // Delay exceeds pause
                    const excessDelay = delayMinutes - pauseMinutes;
                    pauseStatusContainer.innerHTML = `
                        <div class="pause-status pause-danger">
                            <div class="flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                                </svg>
                                <span>Verspätung: ${excessDelay} Minuten über die geplante Pause hinaus!</span>
                            </div>
                        </div>
                    `;
                }
            }
        }

        function formatDelay(ms) {
            // Handle negative delay (ahead of schedule)
            const isNegative = ms < 0;
            ms = Math.abs(ms);
            
            const seconds = Math.floor((ms / 1000) % 60);
            const minutes = Math.floor((ms / (1000 * 60)) % 60);
            const hours = Math.floor(ms / (1000 * 60 * 60));
            
            const formattedTime = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            return isNegative ? `-${formattedTime}` : formattedTime;
        }

        function formatDayName(day) {
            return day.replace('_', ' ');
        }

        // Generate sample data with addresses per day
        function generateSampleData() {
            const days = [
                'FREITAG', 'SAMSTAG', 'SONNTAG', 'MONTAG', 'DIENSTAG', 
                'AUSWÄRTIGER_SAMSTAG', 'AUSWÄRTIGER_SONNTAG'
            ];
            
            const streets = [
                'Marktplatz', 'Hauptstraße', 'Kirchstraße', 'Bachstraße', 'Bergstraße',
                'Schillerstraße', 'Goetheweg', 'Mozartstraße', 'Beethovenallee', 'Rathausplatz',
                'Bahnhofstraße', 'Lindenweg', 'Eichenstraße', 'Tannenweg', 'Birkenallee',
                'Ahornstraße', 'Ulmenweg', 'Kastanienallee', 'Rosenweg', 'Tulpenstraße'
            ];
            
            const specialEvents = [
                'Autos nach Marktplatz', 'Autos nach Festplatz', 'Autos nach Rathaus',
                'Autos nach Bahnhof', 'Autos nach Schule', 'Mittagspause', 'Kurze Pause',
                'Umzug startet', 'Umzug endet', 'Treffpunkt wechselt'
            ];
            
            const colors = [
                '#ff6b6b', '#4ecdc4', '#ffe66d', '#1a535c', '#ff9f1c', 
                '#2ec4b6', '#e71d36', '#ff9f1c', '#6a0572', '#ab83a1'
            ];
            
            const jahrgänge = [
                '2010', '2011', '2012', '2013', '2014', '2015',
                '2010, 2011', '2012, 2013', '2014, 2015', 'Alle'
            ];
            
            const firstNames = [
                'Hans', 'Peter', 'Michael', 'Thomas', 'Andreas', 'Wolfgang', 'Christian', 'Stefan', 'Martin', 'Josef',
                'Anna', 'Maria', 'Elisabeth', 'Monika', 'Ursula', 'Christine', 'Sabine', 'Petra', 'Claudia', 'Andrea'
            ];
            
            const lastNames = [
                'Müller', 'Schmidt', 'Schneider', 'Fischer', 'Weber', 'Meyer', 'Wagner', 'Becker', 'Schulz', 'Hoffmann',
                'Schäfer', 'Koch', 'Bauer', 'Richter', 'Klein', 'Wolf', 'Schröder', 'Neumann', 'Schwarz', 'Zimmermann'
            ];
            
            const data = {};
            
            days.forEach(day => {
                const dayAddresses = [];
                
                // Set start time based on day
                let startHour, startMinute;
                if (day === 'FREITAG') {
                    startHour = 17;
                    startMinute = 0;
                } else if (day.includes('SONNTAG')) {
                    startHour = 10;
                    startMinute = 0;
                } else {
                    startHour = 9;
                    startMinute = 0;
                }
                
                // Generate addresses for the day
                for (let i = 0; i < 20; i++) { // Reduced to 20 for better performance
                    // Calculate time (increment by 10-20 minutes)
                    startMinute += 10 + Math.floor(Math.random() * 11);
                    if (startMinute >= 60) {
                        startHour += Math.floor(startMinute / 60);
                        startMinute %= 60;
                    }
                    if (startHour >= 24) {
                        startHour %= 24;
                    }
                    
                    const timeStr = `${String(startHour).padStart(2, '0')}:${String(startMinute).padStart(2, '0')}`;
                    
                    // Randomly select street and other attributes
                    const street = streets[Math.floor(Math.random() * streets.length)];
                    const houseNumber = Math.floor(Math.random() * 100) + 1;
                    const jahrgang = jahrgänge[Math.floor(Math.random() * jahrgänge.length)];
                    
                    // Generate a name (90% chance to have a name)
                    const hasName = Math.random() < 0.9;
                    const name = hasName ? 
                        `${firstNames[Math.floor(Math.random() * firstNames.length)]} ${lastNames[Math.floor(Math.random() * lastNames.length)]}` : 
                        null;
                    
                    // 10% chance for colored address
                    const hasColor = Math.random() < 0.1;
                    const color = hasColor ? colors[Math.floor(Math.random() * colors.length)] : 'transparent';
                    
                    // 15% chance for special event
                    const hasSpecialEvent = Math.random() < 0.15;
                    const specialEvent = hasSpecialEvent ? specialEvents[Math.floor(Math.random() * specialEvents.length)] : null;
                    
                    // 60% chance for pause (0-30 minutes)
                    const hasPause = Math.random() < 0.6;
                    const pauseMinutes = hasPause ? Math.floor(Math.random() * 31) : 0;
                    
                    dayAddresses.push({
                        strasse: street,
                        hausnummer: String(houseNumber),
                        uhrzeit: timeStr,
                        jahrgang: jahrgang,
                        name: name,
                        farbe: color,
                        spezialEvent: specialEvent,
                        pause: pauseMinutes
                    });
                }
                
                data[day] = dayAddresses;
            });
            
            return data;
        }

        // Load Google Maps API
        function loadGoogleMapsAPI() {
            const script = document.createElement('script');
            script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyAqflpyqhfuMQ-LWCG3GpalzjatkpZvb2I&callback=initMapsCallback';
            script.async = true;
            script.defer = true;
            document.head.appendChild(script);
        }

        // Callback for Google Maps API
        window.initMapsCallback = function() {
            // Maps API loaded, ready to use when needed
            console.log('Google Maps API loaded');
        };

        // Load Google Maps API when the page loads
        window.addEventListener('load', loadGoogleMapsAPI);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'953c05d3720a3aa4',t:'MTc1MDU5ODIxMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden;"></iframe>

</body></html>